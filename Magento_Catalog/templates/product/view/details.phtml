<?php // @codingStandardsIgnoreFile ?>
<?php if ($detailedInfoGroup = $block->getGroupChildNames('detailed_info', 'getChildHtml')): ?>
    <div
        id="product-tab"
        class="tab product-view__tab"
        role="tablist"
        data-mage-init='{ "tab" : {} }'
    >
        <?php
            $layout = $block->getLayout();
            $tabId = 1;
        ?>

        <?php foreach ($detailedInfoGroup as $name):?>
            <?php
                $html = $layout->renderElement($name);
                if (!trim($html)) {
                    continue;
                }
                $alias = $layout->getElementAlias($name);
                $label = $block->getChildData($alias, 'title');
            ?>

            <button
                id="tab-title-<?= $tabId; ?>"
                class="tab__title <?= ($tabId == 1) ? 'tab__title--active' : ''; ?>"
                data-tab="tab-<?= $tabId; ?>"
                aria-controls="tab-<?= $tabId; ?>"
                data-testid="product-tab__title"
                aria-selected="<?= ($tabId == 1) ? 'true' : 'false'; ?>"
                aria-expanded="<?= ($tabId == 1) ? 'true' : 'false'; ?>"
                role="tab"
            >
                <?= $label; ?>

                <svg
                    class="icon tab__icon"
                    role="presentation"
                    focusable="false"
                >
                    <use xlink:href="<?= $block->getViewFileUrl('images/icons-sprite.svg#angle-down'); ?>"></use>
                </svg>
            </button>

            <div
                id="tab-<?= $tabId; ?>"
                class="tab__content <?= ($tabId == 1) ? 'tab__content--active' : ''; ?>"
                data-content="tab-<?= $tabId; ?>"
                aria-labelledby="tab-title-<?= $tabId; ?>"
                aria-hidden="<?= ($tabId == 1) ? 'false' : 'true'; ?>"
                role="tabpanel"
            >
                <?= $html; ?>
            </div>
            <?php $tabId++; ?>
        <?php endforeach; ?>
    </div>
<?php endif; ?>
