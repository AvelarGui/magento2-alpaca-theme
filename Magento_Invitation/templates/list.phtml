<?php
// phpcs:disable Magento2.Templates.ThisInTemplate
?>
<?php
/**
 * @see \Magento\Invitation\Block\Customer\ListCustomer
 */
?>
<div
    class="
        dashboard-table
        margin-bottom-xs
        invitations
    "
>
    <?= $block->getChildHtml('list_before') ?>

    <?php if (count($block->getInvitationCollection())) : ?>
        <div class="dashboard-table__content">
            <table
                class="table margin-0"
                id="invitations-list-table"
                tabindex="0"
                role="table"
            >
                <caption class="table__caption">
                    <?= $block->escapeHtml(__('My Invitations')) ?>
                </caption>
                <thead>
                    <tr role="row">
                        <th
                            scope="col"
                            role="columnheader"
                        >
                            <?= $block->escapeHtml(__('Email')) ?>
                        </th>
                        <th
                            scope="col"
                            role="columnheader"
                        >
                            <?= $block->escapeHtml(__('Status')) ?>
                        </th>
                    </tr>
                </thead>
                <tbody>
                <?php foreach ($block->getInvitationCollection() as $invitation) : ?>
                    <tr role="row">
                        <td
                            data-th="<?= $block->escapeHtmlAttr(__('Email:')) ?>"
                            role="gridcell"
                        >
                            <?= $block->escapeHtml($invitation->getEmail()) ?>
                        </td>
                        <td
                            data-th="<?= $block->escapeHtmlAttr(__('Status')) ?>"
                            role="gridcell"
                        >
                            <?=
                                $block->escapeHtml($this->helper(\Magento\Invitation\Helper\Data::class)
                                    ->getInvitationStatusText($invitation))
                            ?>
                        </td>
                    </tr>
                <?php endforeach; ?>
                </tbody>
            </table>
        </div>
    <?php else : ?>
        <div class="message">
            <?= $block->escapeHtml(__('There are no sent invitations.')) ?>
        </div>
    <?php endif; ?>

    <div class="actions-group">
        <div class="actions-group__handler">
            <a
                href="
                    <?= $block->escapeUrl($this->helper(\Magento\Invitation\Helper\Data::class)
                        ->getCustomerInvitationFormUrl()) ?>
                "
                class="
                    button
                    actions-group__button
                "
                title="<?= $block->escapeHtmlAttr(__('Send Invitations')) ?>"
            >
                <?= $block->escapeHtml(__('Send Invitations')) ?>
            </a>
        </div>
        <div class="actions-group__handler">
            <a
                href="<?= $block->escapeUrl($block->getBackUrl()) ?>"
                class="
                    link
                    actions-group__link
                "
                title="<?= $block->escapeHtmlAttr(__('Back')) ?>"
            >
                <?= $block->escapeHtml(__('Back')) ?>
            </a>
        </div>
    </div>
</div>
