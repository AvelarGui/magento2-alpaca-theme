<?php

$sliderClass = $block->getSliderClass();
$wrapperClass = $block->getWrapperClass();

//slider config

$sliderInfinite = $block->getInfinite();
$sliderCenterMode = $block->getCenterMode();
$sliderDots = $block->getDots();
$sliderArrows = $block->getArrows();
$sliderAutoplay = $block->getAutoplay();
$sliderAutoplaySpeed = $block->getAutoplaySpeed();
$sliderPauseOnFocus = $block->getPauseOnFocus();
$sliderPauseOnHover = $block->getPauseOnHover();

$sliderInfinite = ($sliderInfinite === 'no') ? 'false' : 'true';
$sliderCenterMode = ($sliderCenterMode === 'yes') ? 'true' : 'false';
$sliderDots = ($sliderDots === 'no') ? 'false' : 'true';
$sliderArrows = ($sliderArrows === 'no') ? 'false' : 'true';
$sliderAutoplay = ($sliderAutoplay === 'yes') ? 'true' : 'false';
$sliderAutoplaySpeed = $sliderAutoplaySpeed ? $block->escapeHtmlAttr($sliderAutoplaySpeed) : '3000';
$sliderPauseOnFocus = ($sliderPauseOnFocus === 'no') ? 'false' : 'true';
$sliderPauseOnHover = ($sliderPauseOnHover === 'no') ? 'false' : 'true';

//slider data
$slidesArray = $block->getSlidesArray();
$sliderDisplayTitle = $block->getDisplayTitle();
$sliderTitle = $block->getSliderTitle();
$sliderTitleClass = $block->getTitleClass();
$sliderContentBefore = $block->getContentBefore();
$sliderContentAfter = $block->getContentAfter();
?>
<?php if ($wrapperClass): ?>
    <div class="<?= $block->escapeHtmlAttr($wrapperClass) ?>">
<?php endif; ?>

<div class="slider <?= $block->escapeHtmlAttr($sliderClass) ?>">
    <?php if ($sliderDisplayTitle): ?>
        <div class="slider__heading">
            <span class="<?= $block->escapeHtmlAttr($sliderTitleClass) ?>">
                <?= $sliderTitle ?>
            </span>
        </div>
    <?php endif ?>

    <?php if ($sliderContentBefore): ?>
        <div class="slider__before">
            <?= $sliderContentBefore ?>
        </div>
    <?php endif ?>

    <div
        class="slider-slick"
        data-rewind="true"
        data-enable-mouse-events="true"
        data-slides-to-scroll="1"
        data-mage-init='{
            "slider": {
                "infinite"       : <?= $sliderInfinite ?>,
                "centerMode"     : <?= $sliderCenterMode ?>,
                "dots"           : <?= $sliderDots ?>,
                "arrows"         : <?= $sliderArrows ?>,
                "autoplay"       : <?= $sliderAutoplay ?>,
                "autoplaySpeed"  : <?= $sliderAutoplaySpeed ?>,
                "pauseOnFocus"   : <?= $sliderPauseOnFocus ?>,
                "pauseOnHover"   : <?= $sliderPauseOnHover ?>,
                "dotsClass"      : "slider-slick__dots",
                "loadedClass"    : "slider-slick__slides--loaded",
                "elementSlides"  : ".slider-slick__slides",
                "elementNavPrev" : ".slider-slick__prev",
                "elementNavNext" : ".slider-slick__next"
            }
        }'
    >
        <div class="slider-slick__handler">
            <div class="slider-slick__slides">
                <?php foreach ($slidesArray as $slide): ?>
                    <div class="slider-slick__item">
                        <?= $slide ?>
                    </div>
                <?php endforeach ?>
            </div>
        </div>

        <?php if ($sliderArrows === 'true'): ?>
            <div class="slider-slick__navigation">
                <div class="slider-slick__arrows">
                    <button
                        class="
                            button
                            button--icon
                            slider-slick__nav-button
                            slider-slick__prev
                        "
                        type="button"
                        aria-label="<?= $block->escapeHtmlAttr(__('Go to previous slide')) ?>"
                    >
                        <svg
                            class="slider-slick__nav-icon"
                            role="img"
                        >
                            <title><?= __('Arrow left') ?></title>
                            <use xlink:href="<?= $block->escapeUrl($block->getViewFileUrl('images/icons-sprite.svg#arrow-left')); ?>"></use>
                        </svg>
                    </button>
                    <button
                        class="
                            button
                            button--icon
                            slider-slick__nav-button
                            slider-slick__next
                        "
                        type="button"
                        aria-label="<?= $block->escapeHtmlAttr(__('Go to next slide')) ?>"
                    >
                        <svg
                            class="slider-slick__nav-icon"
                            role="img"
                        >
                            <title><?= __('Arrow right') ?></title>
                            <use xlink:href="<?= $block->escapeUrl($block->getViewFileUrl('images/icons-sprite.svg#arrow-right')); ?>"></use>
                        </svg>
                    </button>
                </div>
            </div>
        <?php endif; ?>
    </div>

    <?php if ($sliderContentAfter): ?>
        <div class="slider__after">
            <?= $sliderContentAfter ?>
        </div>
    <?php endif ?>
</div>

<?php if ($wrapperClass): ?>
    </div>
<?php endif; ?>
