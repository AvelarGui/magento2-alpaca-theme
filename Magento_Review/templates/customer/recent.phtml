<?php
/** @var $block \Magento\Review\Block\Customer\Recent */
?>

<?php if ($block->getReviews() && count($block->getReviews())): ?>
    <div class="dashboard-items">
        <div class="dashboard-table__header">
            <h5 class="heading heading--fifth-level dashboard-table__title">
                <?php /* @escapeNotVerified */ echo __('My Recent Reviews') ?>
            </h5>

            <a class="link dashboard-table__link" 
               href="<?php /* @escapeNotVerified */ echo $block->getAllReviewsUrl() ?>"
            >
               <?php /* @escapeNotVerified */ echo __('View All') ?>
            </a>
        </div>

        <div class="grid dashboard-items__content">
            <?php foreach ($block->getReviews() as $_review): ?>
                <div class="dashboard-items__item grid__column grid__column--1-4">
                    <h5 class="heading heading--sixth-level">
                        <a href="<?php /* @escapeNotVerified */ echo $block->getReviewUrl($_review->getReviewId()) ?>">
                            <?php echo $block->escapeHtml($_review->getName()) ?>
                        </a>
                    </h5>

                    <?php if ($_review->getSum()): ?>
                        <?php $rating = $_review->getSum() / $_review->getCount() ?>

                        <span class="review__description">
                            <?php /* @escapeNotVerified */ echo __('Rating') ?>:
                        </span>

                        <div class="rating__summary" title="<?php /* @escapeNotVerified */ echo $rating; ?>%">
                            <span class="rating__fill" style="width:<?php /* @escapeNotVerified */ echo $rating; ?>%">
                                <span><?php /* @escapeNotVerified */ echo $rating; ?>%</span>
                            </span>
                        </div>
                    <?php endif; ?>
                </div>
            <?php endforeach; ?>
        </div>
    </div>
<?php endif; ?>
